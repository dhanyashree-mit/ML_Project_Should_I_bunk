<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Should I Bunk? – Smart Predictor</title>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">

    <style>
        body {
            background: linear-gradient(to right, #4facfe, #00f2fe);
            min-height: 100vh; padding: 30px;
            font-family: 'Segoe UI', sans-serif;
        }
        .container-box {
            background: white; padding: 30px;
            border-radius: 15px; max-width: 900px;
            margin: auto;
            box-shadow: 0 5px 18px rgba(0,0,0,0.15);
        }
        h2 { text-align: center; font-weight: 700; margin-bottom: 25px; }
        .section-title {
            background: #eef1f5; padding: 10px; border-radius: 8px;
            font-size: 18px; font-weight: 600; margin-top: 20px;
            border-left: 5px solid #0d6efd;
        }
        label { font-weight: 600; margin-top: 12px; }
        .btn-primary { width: 100%; font-size: 18px; margin-top: 20px; }
        .btn-secondary { width: 100%; font-size: 18px; margin-top: 10px; }
        .result-box {
            background: #e8f7ff; padding: 20px;
            border-radius: 10px; border-left: 6px solid #0d6efd;
            margin-top: 25px;
        }
    </style>
</head>

<body>

<div class="container-box">

    <h2>Should I Bunk? – Smart Decision Assistant</h2>

    <form action="/predict" method="POST">

        <div class="section-title">Attendance Forecasting</div>

        <label>Present Attendance (%)</label>
        <input type="number" class="form-control"
               name="present_attendance"
               value="{{ request.form.present_attendance }}"
               min="1" max="100" required>

        <label>Number of Classes Conducted</label>
        <input type="number" class="form-control"
               name="classes_conducted"
               value="{{ request.form.classes_conducted }}"
               min="1" required>

        <label>Total Number of Classes</label>
        <input type="number" class="form-control"
               name="total_classes"
               value="{{ request.form.total_classes }}"
               min="1" required>

        <div class="section-title">ML-Based Bunk Prediction</div>

        <label>Subject Difficulty</label>
        <select class="form-control" name="subject_difficulty" required>
            <option value="1" {% if request.form.subject_difficulty == "1" %}selected{% endif %}>1 – Very Easy</option>
            <option value="2" {% if request.form.subject_difficulty == "2" %}selected{% endif %}>2 – Easy</option>
            <option value="3" {% if request.form.subject_difficulty == "3" %}selected{% endif %}>3 – Moderate</option>
            <option value="4" {% if request.form.subject_difficulty == "4" %}selected{% endif %}>4 – Hard</option>
            <option value="5" {% if request.form.subject_difficulty == "5" %}selected{% endif %}>5 – Very Hard</option>
        </select>

        <label>Class Importance</label>
        <select class="form-control" name="class_importance" required>
            <option value="1" {% if request.form.class_importance == "1" %}selected{% endif %}>1 – Low</option>
            <option value="2" {% if request.form.class_importance == "2" %}selected{% endif %}>2 – Medium</option>
            <option value="3" {% if request.form.class_importance == "3" %}selected{% endif %}>3 – Important</option>
            <option value="4" {% if request.form.class_importance == "4" %}selected{% endif %}>4 – High Importance</option>
            <option value="5" {% if request.form.class_importance == "5" %}selected{% endif %}>5 – Critical</option>
        </select>

        <label>Upcoming Exam?</label>
        <select class="form-control" name="upcoming_exam" required>
            <option value="0" {% if request.form.upcoming_exam == "0" %}selected{% endif %}>No</option>
            <option value="1" {% if request.form.upcoming_exam == "1" %}selected{% endif %}>Yes</option>
        </select>

        <label>Assignment Due Today?</label>
        <select class="form-control" name="assignment_due" required>
            <option value="0" {% if request.form.assignment_due == "0" %}selected{% endif %}>No</option>
            <option value="1" {% if request.form.assignment_due == "1" %}selected{% endif %}>Yes</option>
        </select>

        <label>Sleep Hours</label>
        <input type="number" class="form-control"
               name="sleep_hours"
               value="{{ request.form.sleep_hours }}"
               min="0" max="12" step="0.1" required>

        <label>Stress Level</label>
        <input type="number" class="form-control"
               name="stress_level"
               value="{{ request.form.stress_level }}"
               min="1" max="10" required>

        <label>Mood</label>
        <select class="form-control" name="mood" required>
            <option value="1" {% if request.form.mood == "1" %}selected{% endif %}>1 – Very Bad</option>
            <option value="2" {% if request.form.mood == "2" %}selected{% endif %}>2 – Bad</option>
            <option value="3" {% if request.form.mood == "3" %}selected{% endif %}>3 – Neutral</option>
            <option value="4" {% if request.form.mood == "4" %}selected{% endif %}>4 – Good</option>
            <option value="5" {% if request.form.mood == "5" %}selected{% endif %}>5 – Excellent</option>
        </select>

        <label>Health Condition</label>
        <select class="form-control" name="health_condition" required>
            <option value="1" {% if request.form.health_condition == "1" %}selected{% endif %}>1 – Poor</option>
            <option value="2" {% if request.form.health_condition == "2" %}selected{% endif %}>2 – Weak</option>
            <option value="3" {% if request.form.health_condition == "3" %}selected{% endif %}>3 – Okay</option>
            <option value="4" {% if request.form.health_condition == "4" %}selected{% endif %}>4 – Good</option>
            <option value="5" {% if request.form.health_condition == "5" %}selected{% endif %}>5 – Excellent</option>
        </select>

        <label>Teacher Strictness</label>
        <select class="form-control" name="teacher_strictness" required>
            <option value="1" {% if request.form.teacher_strictness == "1" %}selected{% endif %}>1 – Lenient</option>
            <option value="2" {% if request.form.teacher_strictness == "2" %}selected{% endif %}>2 – Mildly Strict</option>
            <option value="3" {% if request.form.teacher_strictness == "3" %}selected{% endif %}>3 – Strict</option>
            <option value="4" {% if request.form.teacher_strictness == "4" %}selected{% endif %}>4 – Very Strict</option>
            <option value="5" {% if request.form.teacher_strictness == "5" %}selected{% endif %}>5 – Extremely Strict</option>
        </select>

        <label>Class Engagement</label>
        <select class="form-control" name="class_engagement" required>
            <option value="1" {% if request.form.class_engagement == "1" %}selected{% endif %}>1 – Boring</option>
            <option value="2" {% if request.form.class_engagement == "2" %}selected{% endif %}>2 – Low</option>
            <option value="3" {% if request.form.class_engagement == "3" %}selected{% endif %}>3 – Average</option>
            <option value="4" {% if request.form.class_engagement == "4" %}selected{% endif %}>4 – Interesting</option>
            <option value="5" {% if request.form.class_engagement == "5" %}selected{% endif %}>5 – Highly Engaging</option>
        </select>

        <label>Weather</label>
        <select class="form-control" name="weather" required>
            <option value="1" {% if request.form.weather == "1" %}selected{% endif %}>1 – Sunny</option>
            <option value="2" {% if request.form.weather == "2" %}selected{% endif %}>2 – Cloudy</option>
            <option value="3" {% if request.form.weather == "3" %}selected{% endif %}>3 – Rainy</option>
            <option value="4" {% if request.form.weather == "4" %}selected{% endif %}>4 – Windy</option>
            <option value="5" {% if request.form.weather == "5" %}selected{% endif %}>5 – Stormy</option>
        </select>

        <label>Day of Week</label>
        <select class="form-control" name="day_of_week" required>
            <option value="1" {% if request.form.day_of_week == "1" %}selected{% endif %}>Monday</option>
            <option value="2" {% if request.form.day_of_week == "2" %}selected{% endif %}>Tuesday</option>
            <option value="3" {% if request.form.day_of_week == "3" %}selected{% endif %}>Wednesday</option>
            <option value="4" {% if request.form.day_of_week == "4" %}selected{% endif %}>Thursday</option>
            <option value="5" {% if request.form.day_of_week == "5" %}selected{% endif %}>Friday</option>
            <option value="6" {% if request.form.day_of_week == "6" %}selected{% endif %}>Saturday</option>
            <option value="7" {% if request.form.day_of_week == "7" %}selected{% endif %}>Sunday</option>
        </select>

        <!-- Buttons -->
        <button type="submit" class="btn btn-primary">Predict</button>

        <!-- WORKING RESET BUTTON -->
        <!-- Replace your existing reset submit button with this -->
<button type="button" class="btn btn-secondary" onclick="window.location.href='/'">
    Reset
</button>


    </form>

    {% if prediction_text %}
    <div class="result-box">
        <h4>{{ prediction_text }}</h4>

        {% if probability_text %}
            <p><strong>{{ probability_text }}</strong></p>
            <p style="font-size:14px; color:#555;">
                (This shows how confident the ML model is in its decision)
            </p>
        {% endif %}

        {% if attendance_bunk %}
            <p>{{ attendance_bunk }}</p>
        {% endif %}

        {% if attendance_attend %}
            <p>{{ attendance_attend }}</p>
        {% endif %}
    </div>
    {% endif %}

</div>

</body>
</html>
